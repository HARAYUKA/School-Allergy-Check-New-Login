<header class="navbar navbar-fixed-top navbar-inverse">
  <div class="container">
    <%= link_to "Allergy Check App", root_path, id: "logo" %>
    <nav>
      <ul class="nav navbar-nav navbar-right">
        <% if teacher_signed_in? %>
          <li><%= link_to "ホーム", top_path(school_url: params[:school_url]) %></li>
        <% else %>
          <li><%= link_to "ホーム", root_path %></li>
        <% end %>
        <% if logged_in? %>
         <li><%= link_to "全てのユーザー", users_path %></li>
         <li><%= link_to "児童アレルギー情報", students_path %></li>
         <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              メニュー <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li><%= link_to "アレルギーチェック", current_user %></li>
              <li><%= link_to "設定", edit_user_path(current_user) %></li>
              <li class="divider"></li>
              <li>
                <%= link_to "ログアウト", logout_path, method: :delete %>
              </li>
            </ul>
          </li>
        <% elsif system_admin_signed_in? %>
          <li><%= link_to '学校新規作成', new_system_admins_school_path %></li>
          <li><%= link_to '学校一覧', system_admins_schools_path %></li>
          <li><%= link_to 'ログアウト', destroy_system_admin_session_path, method: :delete %></li>
        <% elsif teacher_signed_in? %>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              メニュー <b class="caret"></b>
            </a>
            <% if current_teacher.admin? %>
              <ul class="dropdown-menu">
                <li><%= link_to '本日の作業', show_teachers_path(school_url: params[:school_url]) %></li>
                <li><%= link_to '職員登録', new_teacher_registration_path(school_url: params[:school_url]) %></li>
                <li><%= link_to '職員一覧', classrooms_path(school_url: params[:school_url]) %></li>
                <li><%= link_to 'クラス編集', edit_using_class_classrooms_path(school_url: params[:school_url]) %></li>
                <li class="divider"></li>
                <li>
                  <li><%= link_to 'ログアウト', destroy_teacher_session_path, method: :delete %></li>
                </li>
              </ul>
            <% else %>
              <ul class="dropdown-menu">
                <li><%= link_to '本日の作業', show_teachers_path(school_url: params[:school_url]) %></li>
                <li class="divider"></li>
                <li>
                  <li><%= link_to 'ログアウト', destroy_teacher_session_path, method: :delete %></li>
                </li>
              </ul>
            <% end %>
          </li>
        <% else %>
          <% if params[:school_url].blank? %>
            <%# <li><%= link_to "ログイン", login_path %></li> %>
            <li><%= link_to "ログイン", new_system_admin_session_path %></li>
          <% else %>
            <li><%= link_to "ログイン", new_teacher_session_path(school_url: params[:school_url]) %></li>
          <% end %>
        <% end %>
      </ul>
    </nav>
  </div>
</header>